# SystemMonitor 局域网客户端连接指南

## 问题描述
局域网中的其他用户运行客户端后，后台页面没有出现相关客户端的信息。

## 问题原因
客户端代码中硬编码了服务器地址为 `http://localhost:8000`，这导致其他局域网中的客户端无法连接到服务器。

## 解决方案

### 1. 服务器端配置
确保服务器监听所有网络接口：
- 服务器已配置为监听 `0.0.0.0:8000`，允许来自任何IP的连接
- 服务器IP地址：`10.109.189.109`（根据实际情况可能不同）

### 2. 客户端连接方法

#### 方法一：使用命令行参数（推荐）
在客户端机器上打开命令提示符，运行：
```
python start_client.py --server http://10.109.189.109:8000
```

#### 方法二：使用批处理文件
直接运行 `start_client_lan.bat` 文件，它会自动连接到正确的服务器地址。

#### 方法三：使用配置文件
1. 确保 `client_config.py` 文件存在并包含正确的服务器地址：
   ```python
   SERVER_URL = "http://10.109.189.109:8000"
   ```
2. 正常运行客户端：
   ```
   python start_client.py
   ```

#### 方法四：使用环境变量
在客户端机器上设置环境变量：
```
set SYSTEM_MONITOR_SERVER=http://10.109.189.109:8000
python start_client.py
```

### 3. 获取服务器IP地址
在服务器机器上打开命令提示符，运行：
```
ipconfig
```
查找以太网适配器或无线网络适配器的IPv4地址。

### 4. 测试连接
使用测试脚本验证连接：
```
python test_connection.py --server http://10.109.189.109:8000
```

### 5. 防火墙设置
确保服务器机器的防火墙允许8000端口的入站连接：
1. 打开Windows防火墙设置
2. 添加入站规则，允许TCP端口8000

## 已修改的文件
1. `system_monitor.py` - 添加了从环境变量或配置文件读取服务器地址的功能
2. `start_client.py` - 添加了命令行参数支持
3. `main.py` - 添加了客户端注册和数据接收的日志记录

## 新增的文件
1. `client_config.example.py` - 配置文件示例
2. `client_config.py` - 实际的配置文件
3. `start_client_lan.bat` - 局域网连接批处理文件
4. `start_client_with_server.bat` - 带服务器参数的批处理文件
5. `test_connection.py` - 连接测试脚本

## 故障排除
1. 确保服务器正在运行并监听所有网络接口（0.0.0.0:8000）
2. 检查服务器和客户端之间的网络连接
3. 验证防火墙设置
4. 查看服务器日志以确认客户端是否尝试连接
5. 确保使用正确的服务器IP地址

## 注意事项
1. 服务器IP地址可能会变化，特别是在使用DHCP的网络环境中
2. 如果服务器IP地址变化，需要更新所有客户端的配置
3. 建议为服务器配置静态IP地址，以避免IP地址变化导致的问题